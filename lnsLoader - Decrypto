local baseUrl = "https://raw.githubusercontent.com/gustavolunas/tibiaScript/refs/heads/master/"

local macros = {
  "main",
  "combo",
  "healing",
  "conditions",
  "swapRing",
  "follow",
  "utilitarios",
  "travel",
  "extras",
  "swapEquip",
  "icons"
}

local index = 1

local function loadNext()
  local file = macros[index]
  if not file then
    -- acabou a lista
    warn("Todos os scripts carregados com sucesso.")
    return
  end

  modules.corelib.HTTP.get(baseUrl .. file .. ".lua", function(script, err)
    if err then
      warn("Erro ao carregar: " .. file)
      index = index + 1
      loadNext()
      return
    end

    local f, loadErr = loadstring(script)
    if not f then
      warn("Erro no loadstring: " .. file)
      index = index + 1
      loadNext()
      return
    end

    -- executa o script
    f()
    warn("Script carregado: " .. file)

    -- pr√≥ximo da fila
    index = index + 1
    loadNext()
  end)
end

-- inicia o loader
loadNext()
