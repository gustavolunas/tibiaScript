local switchConditions = "conditionsButton"

if not storage[switchConditions] then
    storage[switchConditions] = { enabled = false }
end

local conditionsButton = setupUI([[
Panel
  height: 20
  margin-top: -3
  
  BotSwitch
    id: title
    anchors.top: parent.top
    anchors.left: parent.left
    text-align: center
    width: 110
    text: Conditions
    font: verdana-9px
    color: white
    image-source: /images/ui/button_rounded
    $on:
      font: verdana-9px
      color: green

  Button
    id: settings
    anchors.top: prev.top
    anchors.left: prev.right
    anchors.right: parent.right
    margin-left: 0
    height: 17
    text: Config
    font: verdana-9px
    image-source: /images/ui/button_rounded
]])
conditionsButton:setId(switchConditions)
conditionsButton.title:setOn(storage[switchConditions].enabled)

conditionsButton.title.onClick = function(widget)
    local newState = not widget:isOn()
    widget:setOn(newState)
    storage[switchConditions].enabled = newState
end

conditionsInterface = setupUI([[
UIWindow
  id: mainPanel
  size: 310 345
  border: 1 black
  anchors.centerIn: parent
  margin-top: -60

  Panel
    id: background
    anchors.top: parent.top
    anchors.left: parent.left
    anchors.right: parent.right
    anchors.bottom: parent.bottom
    background-color: black
    opacity: 0.70

  Panel
    id: topPanel
    anchors.top: parent.top
    anchors.left: parent.left
    anchors.right: parent.right
    size: 120 30
    text-align: center
    !text: tr('LNS SCRIPT-BOT')
    color: orange
    margin-left: 0
    margin-right: 0
    background-color: black
    $hover:
      image-color: gray
  
  Panel
    id: iconPanel
    anchors.top: parent.top
    anchors.left: parent.left
    size: 60 60
    margin-top: -19
    margin-left: -15

  UIButton
    id: closePanel
    anchors.top: topPanel.top
    anchors.right: parent.right
    size: 18 18
    margin-top: 6
    margin-right: 10
    background-color: orange
    text: X
    color: white
    opacity: 1.00
    $hover:
      color: black
      opacity: 0.80

  FlatPanel
    id: panelMain
    anchors.top: prev.bottom
    anchors.right: parent.right
    anchors.left: parent.left
    margin-top: 18
    margin-right: 8
    margin-left: 8
    height: 50
    image-color: #363636
    layout: verticalBox

  Label
    id: labelHealing
    anchors.top: prev.top
    anchors.left: panelMain.left
    text: CURE STATUS:
    text-auto-resize: true
    font: verdana-9px-italic
    margin-top: -5
    margin-left: 10

  CheckBox
    id: curePoison
    anchors.top: prev.bottom
    anchors.left: labelHealing.left
    margin-top: 8
    width: 110
    text: Poison
    font: verdana-11px-rounded
    color: white

  CheckBox
    id: cureFire
    anchors.top: prev.top
    anchors.left: prev.right
    width: 100
    text: Burn
    font: verdana-11px-rounded
    color: white

  CheckBox
    id: cureEnergy
    anchors.top: prev.top
    anchors.left: prev.right
    width: 110
    text: Energy
    font: verdana-11px-rounded
    color: white

  CheckBox
    id: cureCurse
    anchors.top: curePoison.bottom
    anchors.left: labelHealing.left
    margin-top: 5
    width: 110
    text: Curse
    font: verdana-11px-rounded
    color: white

  CheckBox
    id: cureBleeding
    anchors.top: prev.top
    anchors.left: prev.right
    width: 100
    text: Bleed
    font: verdana-11px-rounded
    color: white

  FlatPanel
    id: abaSelfBuffs
    anchors.top: panelMain.bottom
    anchors.right: parent.right
    anchors.left: parent.left
    margin-top: 18
    margin-right: 8
    margin-left: 8
    height: 230
    image-color: #363636
    layout: verticalBox

  Label
    id: labelCureStatus
    anchors.top: prev.top
    anchors.left: abaSelfBuffs.left
    text: TOOLS CONFIGURATIONS:
    text-auto-resize: true
    font: verdana-9px-italic
    margin-top: -5
    margin-left: 10

  CheckBox
    id: spellHaste
    anchors.top: prev.bottom
    anchors.left: prev.left
    margin-top: 12
    width: 65
    text: Haste:
    font: verdana-11px-rounded
    color: white

  ComboBox
    id: comboHaste
    anchors.verticalCenter: prev.verticalCenter
    anchors.left: prev.right
    width: 130
    @onSetup: |
      self:addOption("")
      self:addOption("Utani Hur")
      self:addOption("Utani Gran Hur")
      self:addOption("Utani Tempo Hur")

  CheckBox
    id: spellUtamo
    anchors.top: prev.bottom
    anchors.left: spellHaste.left
    margin-top: 5
    text-auto-resize: true
    text: Auto Magic Shield
    font: verdana-11px-rounded
    color: white

  CheckBox
    id: spellUtana
    anchors.top: prev.bottom
    anchors.left: spellHaste.left
    margin-top: 8
    text: Auto Invisible
    text-auto-resize: true
    font: verdana-11px-rounded
    color: white

  CheckBox
    id: exetaRes
    anchors.top: prev.bottom
    anchors.left: spellHaste.left
    margin-top: 8
    text: Exeta Res
    text-auto-resize: true
    font: verdana-11px-rounded
    color: white

  CheckBox
    id: exetaAmpRes
    anchors.top: prev.bottom
    anchors.left: spellHaste.left
    margin-top: 8
    text: Exeta Amp Res
    text-auto-resize: true
    font: verdana-11px-rounded
    color: white

  CheckBox
    id: exetaLoot
    anchors.top: prev.bottom
    anchors.left: spellHaste.left
    margin-top: 8
    text: Exeta Loot
    text-auto-resize: true
    font: verdana-11px-rounded
    color: white

  CheckBox
    id: holdTarget
    anchors.top: prev.bottom
    anchors.left: spellHaste.left
    margin-top: 8
    text: Hold Target
    text-auto-resize: true
    font: verdana-11px-rounded
    color: white

  CheckBox
    id: uturaGran
    anchors.top: prev.bottom
    anchors.left: spellHaste.left
    margin-top: 8
    text: Utura Gran
    text-auto-resize: true
    font: verdana-11px-rounded
    color: white

  CheckBox
    id: spellBuff
    anchors.top: prev.bottom
    anchors.left: prev.left
    margin-top: 8
    width: 65
    text: Buff:
    font: verdana-11px-rounded
    color: white

  ComboBox
    id: comboBuff
    anchors.verticalCenter: prev.verticalCenter
    anchors.left: prev.right
    width: 130
    @onSetup: |
      self:addOption("")
      self:addOption("Utito Tempo")
      self:addOption("Utito Tempo San")

]], g_ui.getRootWidget())
conditionsInterface:hide();

conditionsInterface.closePanel.onClick = function()
  conditionsInterface:hide()
end

conditionsButton.settings.onClick = function()
    if not conditionsInterface:isVisible() then
        conditionsInterface:show()
        conditionsInterface:raise()
        conditionsInterface:focus()
    end
end

warn("CONDITIONS EM DESENVOLVIMENTO...")
